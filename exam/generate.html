<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>EXAM SEATING ARRANGEMENT SYSTEM</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"
      integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="stylesheet/generate.css" />
  </head>
  <body>
    <!-- NAVBAR HTML -->

    <nav class="navbar navbar-expand-lg">
      <div class="container-fluid">
        <a class="navbar-brand" href="index.html"
          ><i class="fa-solid fa-pen-to-square"></i>ESA System</a
        >
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <li class="nav-item">
              <a class="nav-link" href="index.html" id="HOME">HOME</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="students.html" id="STUDENTS"
                >STUDENTS</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="generate.html" id="GENERATE"
                >GENERATE SEATING</a
              >
            </li>
            <li class="nav-item">
              <a class="nav-link" href="about.html" id="ABOUT">ABOUT</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="contact.html" id="CONTACT">CONTACT</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- BANNER HTML -->

    <section id="banner">
      <div class="container-fluid">
        <div class="row">
          <div class="col-md-7 offset-md-3" id="banner_content">
            <h2>GENERATE SEATING ARRANGEMENT</h2>
            <p>
              This feature allows you to quickly create an organized seating
              layout for exams based on the specific needs of each session.
              Choose an arrangement style that best suits your exam room setup
              and enter the number of students. With a single click, you'll
              receive a seating plan tailored to maximize space and maintain
              order. This tool streamlines the seating process, making exam day
              preparations efficient and hassle-free.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- DEPARTMENT & YEAR SECTION WITH SELECTION PROCESS -->

    <section id="department_year_selection_section">
      <div class="container-fluid">
        <div class="row">
          <!-- Department and Year Section -->
          <div class="col-12">
            <h2 id="department_year_selection_section_header">Enter Department and Year</h2>
          </div>
          <div class="col-lg-10 offset-lg-1" id="department_year_contents">
            <form id="departmentYearForm">
              <div class="mb-3">
                <label for="department" class="form-label">DEPARTMENT</label>
                <input type="text" class="form-control" id="department" placeholder="Enter department"/>
              </div>
              <div class="mb-3">
                <label for="year" class="form-label">YEAR</label>
                <input type="text" class="form-control" id="year" placeholder="Enter year"/>
              </div>

              <!-- Seating Selection Section -->
              <div class="col-12">
                <h2 id="radio_buttons_section_header">Choose a Seating that Suits your Students</h2>
              </div>
              <div class="row">
                <div class="col-md-6 mb-3">
                  <label class="radio-container">
                    <input type="radio" name="seating_option" value="1" />
                    <img
                      src="stylesheet/images/ROOMS/1.png"
                      alt="Option 1 Image"
                      class="radio-image img-fluid"
                    />
                  </label>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="radio-container">
                    <input type="radio" name="seating_option" value="2" />
                    <img
                      src="stylesheet/images/ROOMS/2.png"
                      alt="Option 2 Image"
                      class="radio-image img-fluid"
                    />
                  </label>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="radio-container">
                    <input type="radio" name="seating_option" value="3" />
                    <img
                      src="stylesheet/images/ROOMS/3.png"
                      alt="Option 3 Image"
                      class="radio-image img-fluid"
                    />
                  </label>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="radio-container">
                    <input type="radio" name="seating_option" value="4" />
                    <img
                      src="stylesheet/images/ROOMS/4.png"
                      alt="Option 4 Image"
                      class="radio-image img-fluid"
                    />
                  </label>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="radio-container">
                    <input type="radio" name="seating_option" value="5" />
                    <img
                      src="stylesheet/images/ROOMS/5.png"
                      alt="Option 5 Image"
                      class="radio-image img-fluid"
                    />
                  </label>
                </div>
                <div class="col-md-6 mb-3">
                  <label class="radio-container">
                    <input type="radio" name="seating_option" value="6" />
                    <img
                      src="stylesheet/images/ROOMS/6.png"
                      alt="Option 6 Image"
                      class="radio-image img-fluid"
                    />
                  </label>
                </div>
              </div>

              <!-- Submit Button -->
              <div class="d-flex justify-content-center">
                <button type="submit" class="btn btn-primary" id="generate_btn">
                  GENERATE
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </section>

    <!-- Output Div to display selected image and result from the backend -->
<div id="selectedImg"></div>
<div id="outputDiv" style="display: none">
  <p id="backendResult"></p>
  <button onclick="printSelectedContent()" class="btn btn-secondary mt-2" style="background-color: red; color: white; display: block; margin: 0 auto; text-align: center;width: 210px; border-radius: 30px;margin-top: 10px;height: 60px;">Print</button>
</div>


    <!-- FAQS HTML -->

    <section id="faq">
      <div class="container-fluid">
        <div class="row">
          <div class="col-12">
            <h3>FAQs</h3>
          </div>
          <div class="col-12" id="faqques">
            <div class="accordion" id="accordionExample">
              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button
                    class="accordion-button collapsed"
                    id="firstques"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapseOne"
                    aria-expanded="false"
                    aria-controls="collapseOne"
                  >
                    1. How do I add rooms and students to the system?
                  </button>
                </h2>
                <div
                  id="collapseOne"
                  class="accordion-collapse collapse"
                  data-bs-parent="#accordionExample"
                >
                  <div class="accordion-body">
                    <p>
                      Adding rooms and students is simple. Once logged in, go to
                      the admin dashboard, select <strong>"Rooms"</strong> or
                      <strong>"Students"</strong> and input the required
                      details. You can also upload bulk data using a CSV file.
                    </p>
                  </div>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button
                    class="accordion-button collapsed evenques"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapseTwo"
                    aria-expanded="false"
                    aria-controls="collapseTwo"
                  >
                    2. Can I make changes to the seating plan after generating
                    it?
                  </button>
                </h2>
                <div
                  id="collapseTwo"
                  class="accordion-collapse collapse"
                  data-bs-parent="#accordionExample"
                >
                  <div class="accordion-body">
                    <p>
                      <strong
                        >Yes, you can manually adjust the seating plan if
                        necessary.</strong
                      >After generating the seating arrangement, the system
                      allows you to modify it by moving students to different
                      seats or rooms.
                    </p>
                  </div>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button
                    class="accordion-button collapsed"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapseThree"
                    aria-expanded="false"
                    aria-controls="collapseThree"
                  >
                    3. Is there a limit to the number of rooms or students I can
                    add?
                  </button>
                </h2>
                <div
                  id="collapseThree"
                  class="accordion-collapse collapse"
                  data-bs-parent="#accordionExample"
                >
                  <div class="accordion-body">
                    <p>
                      <strong
                        >No, the system can handle an unlimited number of rooms
                        and students</strong
                      >, making it ideal for institutions of all sizes.
                    </p>
                  </div>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button
                    class="accordion-button collapsed evenques"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapseFour"
                    aria-expanded="false"
                    aria-controls="collapseFour"
                  >
                    4. Can I generate seating arrangement for multiple exams at
                    once?
                  </button>
                </h2>
                <div
                  id="collapseFour"
                  class="accordion-collapse collapse"
                  data-bs-parent="#accordionExample"
                >
                  <div class="accordion-body">
                    <p>
                      <strong
                        >Yes, you can generate seating arrangements for multiple
                        exams simultaneously.</strong
                      >Just select the specific exams from the dashboard, and
                      the system will generate separate seating plans for each.
                    </p>
                  </div>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button
                    class="accordion-button collapsed"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapseFive"
                    aria-expanded="false"
                    aria-controls="collapseFive"
                  >
                    5. Is the system secure and private?
                  </button>
                </h2>
                <div
                  id="collapseFive"
                  class="accordion-collapse collapse"
                  data-bs-parent="#accordionExample"
                >
                  <div class="accordion-body">
                    <p>
                      <strong>Absolutely!</strong>Our system uses the latest
                      security protocols to ensure that student data and seating
                      arrangements are kept confidential and protected.
                    </p>
                  </div>
                </div>
              </div>

              <div class="accordion-item">
                <h2 class="accordion-header">
                  <button
                    class="accordion-button collapsed evenques"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapseSix"
                    aria-expanded="false"
                    aria-controls="collapseSix"
                  >
                    6. Can I preview the seating plan before finalizing it?
                  </button>
                </h2>
                <div
                  id="collapseSix"
                  class="accordion-collapse collapse"
                  data-bs-parent="#accordionExample"
                >
                  <div class="accordion-body">
                    <p>
                      <strong>Yes, the system provides a preview option </strong
                      >where you can review the seating arrangement before it is
                      finalized. This helps ensure everything is correct before
                      sharing it with students and faculty.
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section id="start">
      <div class="container-fluid">
        <div class="row">
          <div class="col-12">
            <h2>Ready To Simplify Your Exam Seating</h2>
            <button type="button" class="btn"><a href="students.html">CREATE YOUR FIRST PLAN TODAY</a></button>
          </div>
        </div>
      </div>
    </section>

    <footer id="contact">
      <div class="container-fluid">
        <div class="row">
          <div class="col-md-4">
            <a class="navbar-brand" href="#"
              ><i class="fa-solid fa-pen-to-square"></i>ESA System</a
            >
            <span id="parts"
              ><a href="index.html">Home</a> | <a href="about.html">About</a> |
              <a href="index.html#features">Features</a> |
              <a href="contact.html">Contact</a></span
            >
            <address>
              Address:University of Engineering and Management,Kolkata
            </address>
          </div>
          <div class="col-md-6 offset-md-2">
            <span
              ><i class="fa-regular fa-copyright"></i> 2024 Examination Seating
              Arrangement System.</span
            >
            <span>All Rights Reserved</span>
          </div>
        </div>
      </div>
    </footer>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
      crossorigin="anonymous"
    ></script>
    <script>
      document
        .getElementById("departmentYearForm")
        .addEventListener("submit", function (event) {
          event.preventDefault();

          
          const department = document.getElementById("department").value.replace(/ /g, "%20");
          const year = document.getElementById("year").value;

          
          if (!department) {
            alert("Please provide department.");
            return;
          }
          if (!year) {
            alert("Please provide year.");
            return;
          }
          
          const selectedOption = document.querySelector(
            'input[name="seating_option"]:checked'
          );

          if (selectedOption) {
            const selectedValue = selectedOption.value;
            const imagePath = selectedOption.nextElementSibling.src;

            
            document.getElementById(
              "selectedImg"
            ).innerHTML = `<img src="${imagePath}" alt="Selected Image" class="img-fluid">`;}

            
  fetch(`http://localhost:3001/seats?department=${department}&year=${year}`)
  .then((response) => response.json())
  .then((data) => {
    const backendResult = document.getElementById("backendResult");

    if (data.seats && data.seats.length > 0) {
      let tableHTML = `
  <table class="table table-bordered" style="border: 3px solid black; width: 100%; text-align: center; border-collapse: collapse;">
    <thead>
      <tr>
        <th style="font-size: 1.2em; border: 2px solid black; padding: 10px;">Serial No.</th>
        <th style="font-size: 1.2em; border: 2px solid black; padding: 10px;">Name</th>
        <th style="font-size: 1.2em; border: 2px solid black; padding: 10px;">Enrollment Number</th>
        <th style="font-size: 1.2em; border: 2px solid black; padding: 10px;">Room No.</th>
      </tr>
    </thead>
    <tbody>
  `;

      let index = 1;
      let roomNo = 101;

      data.seats.forEach((seat) => {
        tableHTML += `
    <tr>
      <td style="border: 2px solid black; padding: 10px; font-size: 1em;">${index}</td>
      <td style="border: 2px solid black; padding: 10px; font-size: 1em;">${seat.name}</td>
      <td style="border: 2px solid black; padding: 10px; font-size: 1em;">${seat.enrollment_number}</td>
      <td style="border: 2px solid black; padding: 10px; font-size: 1em;">${roomNo}</td>
    </tr>
  `;

        // Increment index and check if it should reset
        index++;
        if (index > 36) {
          index = 1;
          roomNo++;  // Increment room number after 36 students
        }
      });

      tableHTML += `
    </tbody>
  </table>
  `;

      backendResult.innerHTML = tableHTML;
    } else {
      backendResult.textContent = `No seats found for ${department.replace(/%20/g, ' ')} - ${year}.`;
    }
    document.getElementById("outputDiv").style.display = "block";
  })
  .catch((error) => {
    console.error("Error:", error);
    document.getElementById("backendResult").textContent = "An error occurred.";
    document.getElementById("outputDiv").style.display = "block";
  });
  });


function printSelectedContent() {
  
  const selectedImgContent = document.getElementById("selectedImg").innerHTML;
  const backendResultContent = document.getElementById("backendResult").innerHTML;

  
  const printWindow = window.open("");

  
  printWindow.document.write(`
    <html>
      <head>
        <title>Print</title>
        <style>
          body { font-family: Arial, sans-serif; text-align: center; margin: 20px; }
          .print-content { display: flex; flex-direction: column; align-items: center; }
          img { max-width: 100%; height: auto; }
          .result { font-size: 1.2em; margin-top: 10px; }
          @media print {
            body { margin: 0; }
            .print-content { page-break-inside: avoid; }
          }
        </style>
      </head>
      <body>
        <div class="print-content">
          ${selectedImgContent}
          <div class="result">${backendResultContent}</div>
        </div>
      </body>
    </html>
  `);

  
  printWindow.document.close();

  
  setTimeout(() => {
    printWindow.print();
    printWindow.close();
  }, 250);
}


    </script>
  </body>
</html>
